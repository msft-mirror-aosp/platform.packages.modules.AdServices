{
  "testCases": [
    {
      "name": "Simple 1-1 matching",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [{
          "id": "unused",
          "sourceId": 1,
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "triggerData": 2,
          "triggerTime": 8640000002,
          "status": 0,
          "reportTime": 8643600030,
          "triggerPriority": 101,
          "sourceType": "navigation",
          "randomizedTriggerRate":  0.0024263
        }],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "No matching sources",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d2",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d2",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 1,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      }
    },
    {
      "name": "Priority based source selection",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 200,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 1,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 200,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [{
          "id": "unused",
          "sourceId": 2,
          "attributionDestination": "https://www.example2.com/d1",
          "reportTime": 8643600030,
          "adTechDomain": "https://www.example3.com",
          "triggerData": 2,
          "triggerTime": 8640000002,
          "triggerPriority": 101,
          "status": 0,
          "sourceType": "navigation",
          "randomizedTriggerRate":  0.0024263
        }],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Event time based source selection",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000002,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 1,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000002,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [{
          "id": "unused",
          "sourceId": 2,
          "attributionDestination": "android-app://com.example.xyz",
          "reportTime": 8643600030,
          "adTechDomain": "https://www.example3.com",
          "triggerData": 2,
          "triggerTime": 8640000003,
          "triggerPriority": 101,
          "status": 0,
          "sourceType": "navigation",
          "randomizedTriggerRate":  0.0024263
        }],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "android-app://com.example.abc",
            "destinationSite": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Prioritize Install Attributed Source - Navigation",
      "description": "2 Source, 1 Trigger. Trigger should match with install-attributed source.",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 10368000000,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 10368000000,
            "priority": 50,
            "status": 0,
            "installCooldownWindow": 432000000,
            "installAttributed": true,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 10368000000,
            "priority": 100,
            "status": 1,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 10368000000,
            "priority": 50,
            "status": 0,
            "installCooldownWindow": 432000000,
            "installAttributed": true,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [
          {
            "id": "unused",
            "sourceId": 2,
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "triggerPriority": 101,
            "status": 0,
            "reportTime": 8816400000,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "android-app://com.example.abc",
            "destinationSite": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Ignore Install Attributed Source - Navigation",
      "description": "2 Source, 1 Trigger. Trigger should match with high priority source and ignore install-attributed source due to install-cooldown expiry.",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 10368000000,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 10368000000,
            "priority": 50,
            "status": 0,
            "installCooldownWindow": 432000000,
            "installAttributed": true,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 9072000001,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "attributionTriggerIds": ["T1"],
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 10368000000,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 10368000000,
            "priority": 50,
            "status": 1,
            "installCooldownWindow": 432000000,
            "installAttributed": true,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 9072000001,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [
          {
            "id": "unused",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 2,
            "triggerTime": 9072000001,
            "triggerPriority": 101,
            "status": 0,
            "reportTime": 9248400001,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "android-app://com.example.abc",
            "destinationSite": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 9072000001,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Prioritize Install Attributed Source - Event",
      "description": "2 Source, 1 Trigger. Trigger should match with install-attributed source.",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "event",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 10368000000,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "event",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 10368000000,
            "priority": 50,
            "status": 0,
            "installCooldownWindow": 432000000,
            "installAttributed": true,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 1,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "event",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 10368000000,
            "priority": 100,
            "status": 1,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "event",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 10368000000,
            "priority": 50,
            "status": 0,
            "installCooldownWindow": 432000000,
            "installAttributed": true,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 1,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [
          {
            "id": "unused",
            "sourceId": 2,
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 1,
            "triggerTime": 8640000002,
            "triggerPriority": 101,
            "status": 0,
            "reportTime": 8816400000,
            "sourceType": "event",
            "randomizedTriggerRate":  0.0000125
          }
        ],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "android-app://com.example.abc",
            "destinationSite": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Ignore Install Attributed Source - Event",
      "description": "2 Source, 1 Trigger. Trigger should match with high priority source and ignore install-attributed source due to install-cooldown expiry.",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "event",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 10368000000,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "event",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 10368000000,
            "priority": 50,
            "status": 0,
            "installCooldownWindow": 432000000,
            "installAttributed": true,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 9072000001,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "event",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 10368000000,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "event",
            "publisher": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 10368000000,
            "priority": 50,
            "status": 1,
            "installCooldownWindow": 432000000,
            "installAttributed": true,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 9072000001,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [
          {
            "id": "unused",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 0,
            "triggerTime": 9072000001,
            "triggerPriority": 101,
            "status": 0,
            "reportTime": 10371600000,
            "sourceType": "event",
            "randomizedTriggerRate":  0.0000025
          }
        ],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "android-app://com.example.abc",
            "destinationSite": "android-app://com.example.xyz",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 9072000001,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Should truncate trigger data - Event",
      "description": "1 Source, 1 Trigger. They should match and event report's trigger data should be truncated.",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "event",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 7,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "event",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 7,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [{
          "id": "unused",
          "sourceId": 1,
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "triggerData": 1,
          "triggerTime": 8640000002,
          "status": 0,
          "reportTime": 8643600030,
          "triggerPriority": 101,
          "sourceType": "event",
          "randomizedTriggerRate":  0.0000025
        }],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Should truncate trigger data - Navigation",
      "description": "1 Source, 1 Trigger. They should match and event report's trigger data should be truncated.",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 15,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 15,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [{
          "id": "unused",
          "sourceId": 1,
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "triggerData": 7,
          "triggerTime": 8640000002,
          "status": 0,
          "reportTime": 8643600030,
          "triggerPriority": 101,
          "sourceType": "navigation",
          "randomizedTriggerRate":  0.0024263
        }],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Respect Report Count limit",
      "description": "1 source, 2 triggers. New trigger shouldn't be attributed as it is same priority.",
      "input": {
        "sources": [{
          "id": "S1",
          "eventId": 1,
          "sourceType": "event",
          "publisher": "https://www.example1.com/s1",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "eventTime": 8640000001,
          "expiryTime": 8640000030,
          "priority": 100,
          "status": 0,
          "registrant": "android-app://com.example.abc"
        }],
        "triggers": [{
          "id": "T1",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "priority": 101,
          "status": 0,
          "triggerData": 2,
          "triggerTime": 8640000002,
          "registrant": "android-app://com.example.xyz"
        }, {
          "id": "T2",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "priority": 101,
          "status": 0,
          "triggerData": 2,
          "triggerTime": 8640000003,
          "registrant": "android-app://com.example.xyz"
        }],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [{
          "id": "S1",
          "eventId": 1,
          "sourceType": "event",
          "publisher": "https://www.example1.com/s1",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "eventTime": 8640000001,
          "expiryTime": 8640000030,
          "priority": 100,
          "status": 0,
          "registrant": "android-app://com.example.abc"
        }],
        "triggers": [{
          "id": "T1",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "priority": 101,
          "status": 2,
          "triggerData": 2,
          "triggerTime": 8640000002,
          "registrant": "android-app://com.example.xyz"
        }, {
          "id": "T2",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "priority": 101,
          "status": 1,
          "triggerData": 2,
          "triggerTime": 8640000003,
          "registrant": "android-app://com.example.xyz"
        }],
        "event_reports": [{
          "id": "unused",
          "sourceId": 1,
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "triggerData": 0,
          "triggerTime": 8640000002,
          "status": 0,
          "reportTime": 8643600030,
          "triggerPriority": 101,
          "sourceType": "event",
          "randomizedTriggerRate":  0.0000025
        }],
        "attribution_rate_limits": [{
          "id": "unused",
          "sourceSite": "https://www.example1.com",
          "destinationSite": "https://www.example2.com",
          "adTechDomain": "https://www.example3.com",
          "triggerTime": 8640000002,
          "registrant": "android-app://com.example.xyz"
        }]
      }
    },
    {
      "name": "Replace low priority report - event",
      "description": "1 source, 2 triggers. New trigger should be attributed as it is higher priority.",
      "input": {
        "sources": [{
          "id": "S1",
          "eventId": 1,
          "sourceType": "event",
          "publisher": "https://www.example1.com/s1",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "eventTime": 8640000001,
          "expiryTime": 8640000030,
          "priority": 100,
          "status": 0,
          "registrant": "android-app://com.example.abc"
        }],
        "triggers": [{
          "id": "T1",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "priority": 101,
          "status": 0,
          "triggerData": 2,
          "triggerTime": 8640000002,
          "registrant": "android-app://com.example.xyz"
        }, {
          "id": "T2",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "priority": 102,
          "status": 0,
          "triggerData": 1,
          "triggerTime": 8640000003,
          "registrant": "android-app://com.example.xyz"
        }],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [{
          "id": "S1",
          "eventId": 1,
          "sourceType": "event",
          "publisher": "https://www.example1.com/s1",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "eventTime": 8640000001,
          "expiryTime": 8640000030,
          "priority": 100,
          "status": 0,
          "registrant": "android-app://com.example.abc"
        }],
        "triggers": [{
          "id": "T1",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "priority": 101,
          "status": 2,
          "triggerData": 2,
          "triggerTime": 8640000002,
          "registrant": "android-app://com.example.xyz"
        }, {
          "id": "T2",
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "priority": 102,
          "status": 2,
          "triggerData": 1,
          "triggerTime": 8640000003,
          "registrant": "android-app://com.example.xyz"
        }],
        "event_reports": [{
          "id": "unused",
          "sourceId": 1,
          "attributionDestination": "https://www.example2.com/d1",
          "adTechDomain": "https://www.example3.com",
          "triggerData": 1,
          "triggerTime": 8640000003,
          "status": 0,
          "reportTime": 8643600030,
          "triggerPriority": 102,
          "sourceType": "event",
          "randomizedTriggerRate":  0.0000025
        }],
        "attribution_rate_limits": [
          {
            "id": "unused1",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "unused2",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          }]
      }
    },
    {
      "name": "Replace low priority report - navigation",
      "description": "1 source, 4 triggers with increasing priority. The lowest priority report should be replaced by the 4th trigger report.",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 1,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T2",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 102,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T3",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 103,
            "status": 0,
            "triggerData": 3,
            "triggerTime": 8640000004,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T4",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 104,
            "status": 0,
            "triggerData": 4,
            "triggerTime": 8640000005,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 1,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T2",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 102,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T3",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 103,
            "status": 2,
            "triggerData": 3,
            "triggerTime": 8640000004,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T4",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 104,
            "status": 2,
            "triggerData": 4,
            "triggerTime": 8640000005,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [
          {
            "id": "unused",
            "sourceId": 1,
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 2,
            "triggerTime": 8640000003,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 102,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "unused",
            "sourceId": 1,
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 3,
            "triggerTime": 8640000004,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 103,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "unused",
            "sourceId": 1,
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 4,
            "triggerTime": 8640000005,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 104,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ],
        "attribution_rate_limits": [
          {
            "id": "unused1",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "unused2",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "unused3",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000004,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "unused4",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000005,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Replace the most recent low priority report with the higher priority",
      "description": "1 source, 4 triggers. First 3 triggers with same priority and 4th trigger higher priority. The most recent report should be replaced by the higher priority trigger.",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 1,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T2",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T3",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 3,
            "triggerTime": 8640000004,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T4",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 102,
            "status": 0,
            "triggerData": 4,
            "triggerTime": 8640000005,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 1,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T2",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T3",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 2,
            "triggerData": 3,
            "triggerTime": 8640000004,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "T4",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 102,
            "status": 2,
            "triggerData": 4,
            "triggerTime": 8640000005,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [
          {
            "id": "unused",
            "sourceId": 1,
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 1,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "unused",
            "sourceId": 1,
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 2,
            "triggerTime": 8640000003,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "unused",
            "sourceId": 1,
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "triggerData": 4,
            "triggerTime": 8640000005,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 102,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ],
        "attribution_rate_limits": [
          {
            "id": "unused1",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "unused2",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "unused3",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000004,
            "registrant": "android-app://com.example.xyz"
          },
          {
            "id": "unused4",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "adTechDomain": "https://www.example3.com",
            "triggerTime": 8640000005,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Should matches but no report generated - AttributionMode = Never",
      "description": "2 sources, 1 trigger. Ignore 1st source, match with 2nd source but it has attribution mode = Never. Hence, no reports generated",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc",
            "attribution_mode": 1
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 8640000030,
            "priority": 101,
            "status": 0,
            "registrant": "android-app://com.example.abc",
            "attribution_mode": 2
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 1,
            "registrant": "android-app://com.example.abc",
            "attribution_mode": 1
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 8640000030,
            "priority": 101,
            "status": 0,
            "registrant": "android-app://com.example.abc",
            "attribution_mode": 2
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 1,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      }
    },
    {
      "name": "Should matches but no report generated - AttributionMode = Falsely",
      "description": "2 sources, 1 trigger. Ignore 1st source, match with 2nd source but it has attribution mode = Falsely. Hence, no report generation",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc",
            "attribution_mode": 1
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 8640000030,
            "priority": 101,
            "status": 0,
            "registrant": "android-app://com.example.abc",
            "attribution_mode": 3
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 1,
            "registrant": "android-app://com.example.abc",
            "attribution_mode": 1
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "eventTime": 8640000000,
            "expiryTime": 8640000030,
            "priority": 101,
            "status": 0,
            "registrant": "android-app://com.example.abc",
            "attribution_mode": 3
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "adTechDomain": "https://www.example3.com",
            "priority": 101,
            "status": 1,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      }
    }
  ]
}