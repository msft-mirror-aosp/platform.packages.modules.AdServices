{
  "testCases": [
    {
      "name": "Simple 1-1 matching",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "attributionSource": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "attributionSource": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [{
          "id": "unused",
          "sourceId": 1,
          "attributionDestination": "https://www.example2.com/d1",
          "reportTo": "https://www.example3.com/r1",
          "triggerData": 2,
          "triggerTime": 8640000002,
          "status": 0,
          "reportTime": 0,
          "triggerPriority": 101
        }],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "reportTo": "https://www.example3.com/r1",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "No matching sources",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "attributionSource": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d2",
            "reportTo": "https://www.example3.com/r1",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "attributionSource": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d2",
            "reportTo": "https://www.example3.com/r1",
            "priority": 101,
            "status": 1,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      }
    },
    {
      "name": "Priority based source selection",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "attributionSource": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "attributionSource": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 200,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "attributionSource": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 1,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "attributionSource": "https://www.example1.com/s1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 200,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "https://www.example2.com/d1",
            "reportTo": "https://www.example3.com/r1",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [{
          "id": "unused",
          "sourceId": 2,
          "attributionDestination": "https://www.example2.com/d1",
          "reportTime": 0,
          "reportTo": "https://www.example3.com/r1",
          "triggerData": 2,
          "triggerTime": 8640000002,
          "status": 0
        }],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "https://www.example1.com",
            "destinationSite": "https://www.example2.com",
            "reportTo": "https://www.example3.com/r1",
            "triggerTime": 8640000002,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    },
    {
      "name": "Event time based source selection",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "attributionSource": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "attributionSource": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000002,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "reportTo": "https://www.example3.com/r1",
            "priority": 101,
            "status": 0,
            "triggerData": 2,
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [],
        "attribution_rate_limits": []
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "attributionSource": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 1,
            "registrant": "android-app://com.example.abc"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "attributionSource": "android-app://com.example.abc",
            "attributionDestination": "android-app://com.example.xyz",
            "reportTo": "https://www.example3.com/r1",
            "eventTime": 8640000002,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.abc"
          }
        ],
        "triggers": [
          {
            "id": "T1",
            "attributionDestination": "android-app://com.example.xyz",
            "reportTo": "https://www.example3.com/r1",
            "priority": 101,
            "status": 2,
            "triggerData": 2,
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          }
        ],
        "event_reports": [{
          "id": "unused",
          "sourceId": 2,
          "attributionDestination": "android-app://com.example.xyz",
          "reportTime": 0,
          "reportTo": "https://www.example3.com/r1",
          "triggerData": 2,
          "triggerTime": 8640000003,
          "status": 0
        }],
        "attribution_rate_limits": [
          {
            "id": "unused",
            "sourceSite": "android-app://com.example.abc",
            "destinationSite": "android-app://com.example.xyz",
            "reportTo": "https://www.example3.com/r1",
            "triggerTime": 8640000003,
            "registrant": "android-app://com.example.xyz"
          }
        ]
      }
    }
  ]
}