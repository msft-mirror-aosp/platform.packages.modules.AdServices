{
  "testCases": [
    {
      "name": "Single pending report success",
      "input": {
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "output": {
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 1,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "param": {
        "responseCode": 200,
        "action": "SINGLE_REPORT",
        "result": 0,
        "id": "ER1"
      }
    },
    {
      "name": "Single pending report failure",
      "input": {
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "output": {
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "param": {
        "responseCode": 400,
        "action": "SINGLE_REPORT",
        "result": 4,
        "id": "ER1"
      }
    },
    {
      "name": "Single pending report already delivered",
      "input": {
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 1,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "output": {
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 1,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "param": {
        "responseCode": 200,
        "action": "SINGLE_REPORT",
        "result": 2,
        "id": "ER1"
      }
    },
    {
      "name": "Multiple reports for given app",
      "input": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "appDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.1"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "appDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.2"
          },
          {
            "id": "S3",
            "eventId": 3,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "appDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.1"
          }
        ],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER2",
            "sourceId": 2,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER3",
            "sourceId": 3,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "output": {
        "sources": [
          {
            "id": "S1",
            "eventId": 1,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "appDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.1"
          },
          {
            "id": "S2",
            "eventId": 2,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "appDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.2"
          },
          {
            "id": "S3",
            "eventId": 3,
            "sourceType": "navigation",
            "publisher": "https://www.example1.com/s1",
            "appDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "eventTime": 8640000001,
            "expiryTime": 8640000030,
            "priority": 100,
            "status": 0,
            "registrant": "android-app://com.example.1"
          }
        ],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 1,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER2",
            "sourceId": 2,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER3",
            "sourceId": 3,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 1,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "param": {
        "responseCode": 200,
        "action": "ALL_REPORTS_FOR_APP",
        "appName": "android-app://com.example.1"
      }
    },
    {
      "name": "Multiple reports inside window for upload",
      "input":{
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER2",
            "sourceId": 2,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8440000002,
            "status": 0,
            "reportTime": 8443600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      } ,
      "output":{
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 1,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER2",
            "sourceId": 2,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8440000002,
            "status": 1,
            "reportTime": 8443600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "param": {
        "responseCode": 200,
        "action": "ALL_REPORTS",
        "start": 8443600030,
        "end": 8643600030
      }
    },
    {
      "name": "One report within the window, before the window, and after the window",
      "input":{
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER2",
            "sourceId": 2,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8440000002,
            "status": 0,
            "reportTime": 8443600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER3",
            "sourceId": 3,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8240000002,
            "status": 0,
            "reportTime": 8243600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      } ,
      "output":{
        "sources": [],
        "triggers": [],
        "attributions": [],
        "event_reports": [
          {
            "id": "ER1",
            "sourceId": 1,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8640000002,
            "status": 0,
            "reportTime": 8643600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER2",
            "sourceId": 2,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8440000002,
            "status": 1,
            "reportTime": 8443600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          },
          {
            "id": "ER2",
            "sourceId": 3,
            "attributionDestination": "android-app://com.example2/d1",
            "adTechDomain": "https://www.example3.com",
            "enrollmentId": "enrollment-id-3",
            "triggerData": 2,
            "triggerTime": 8240000002,
            "status": 0,
            "reportTime": 8243600030,
            "triggerPriority": 101,
            "sourceType": "navigation",
            "randomizedTriggerRate":  0.0024263
          }
        ]
      },
      "param": {
        "responseCode": 200,
        "action": "ALL_REPORTS",
        "start": 8343600030,
        "end": 8543600030
      }
    }
  ]
}